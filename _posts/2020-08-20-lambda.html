---
permalink: /blog/lambda
---
<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="title" content="Lambda">
    <meta name="description" content="CÃ¡lculo Mental">

    <title>Lambda: CÃ¡lculo Mental - eduardogarcia.xyz</title>

    <style type="text/css">
      :root {
        --blue-a700: #304ffe;
        --pink-a400: #f50057;
        --yellow-a700: #ffd600;
        --black: #000000;
        --white: #ffffff;
      }

      body {
        font-family: monospace;
        font-size: 16px;
        transition-property: background-color, border-color, color;
        transition-duration: .333s;
        transition-timing-function: ease-in-out;
      }

      .white-on-blue {
        background-color: var(--blue-a700);
        color: var(--white);
      }

      .white-on-blue .operation__answer,
      .white-on-blue .operation__submit {
        border-color: var(--white);
        color: var(--white);
      }

      .black-on-pink {
        background-color: var(--pink-a400);
        color: var(--black);
      }

      .black-on-pink .operation__answer,
      .black-on-pink .operation__submit {
        border-color: var(--black);
        color: var(--black);
      }

      .black-on-yellow {
        background-color: var(--yellow-a700);
        color: var(--black);
      }

      .black-on-yellow .operation__answer,
      .black-on-yellow .operation__submit {
        border-color: var(--black);
        color: var(--black);
      }

      .title {
        display: none;
        font-size: 2.5vw;
        text-align: center;
      }

      .header {
        margin-top: 5vw;
        display: flex;
        align-items: baseline;
        justify-content: space-between;
        font-size: 6.25vw;
        font-weight: bold;
      }

      .timer {
        text-align: center;
      }

      .form {
        margin: 0;
      }

      .operation,
      .operation__answer {
        font-size: 15vw;
      }

      .operation {
        text-align: center;
      }

      .operation__inner {
        margin: 10vw 0;
      }

      .operation__answer,
      .operation__submit {
        background: transparent;
        font-family: monospace;
      }

      .operation__answer {
        border: none;
        border-bottom: .75vw solid;
        border-radius: 0;
        font-family: monospace;
        text-align: center;
        width: 33vw;
      }

      .operation__submit {
        padding: 2.5vw 5vw;
        font-size: 10vw;
      }

      .operation__submit[disabled] {
        opacity: .333;
      }

      .results {
        font-size: 7.5vw;
        text-align: center;
      }
    </style>

    <script type="text/javascript">
      const $dom = {
        timer: null,
        form: null,
        operandA: null,
        operandB: null,
        answer: null,
        submit: null,
        correctCount: null,
        wrongCount: null,
      };

      const durationSeconds = 60;

      const state = {
        operandA: null,
        operandB: null,
        answer: null,
        remainingSeconds: durationSeconds,
        correctCount: 0,
        wrongCount: 0,
      };

      function setup() {
        $dom.timer = document.getElementById('timer');
        $dom.form = document.getElementById('form');
        $dom.operandA = document.getElementById('operand-a');
        $dom.operandB = document.getElementById('operand-b');
        $dom.answer = document.getElementById('answer');
        $dom.submit = document.getElementById('submit');
        $dom.correctCount = document.getElementById('correct-count');
        $dom.wrongCount = document.getElementById('wrong-count');

        $dom.form.addEventListener('submit', (event) => {
          event.preventDefault();

          updateState({
            answer: parseInt($dom.answer.value, 10),
          });

          evaluateAnswer();
        });

        updateOperation();
        startTimer();
      }

      function startTimer() {
        const tickMs = 166;
        const oneMinuteFromNow = Date.now() + (durationSeconds * 1000);

        const timeout = setInterval(() => {
          let remainingSeconds = (oneMinuteFromNow - Date.now()) / 1000;

          if (remainingSeconds < 0) {
            clearInterval(timeout);
            remainingSeconds = 0;
          }

          updateState({
            remainingSeconds,
          });
        }, tickMs);
      }

      function formatTime(seconds) {
        const minutes = Math.floor(seconds / 60);
        const secondsPart = Math.floor(seconds - (minutes * 60)).toString();

        return `${minutes}:${secondsPart.padStart(2, '0')}`;
      }

      function updateOperation() {
        updateState({
          operandA: getRandomInt(10),
          operandB: getRandomInt(10),
        });

        clearAnswerAndSetFocus();
      }

      function evaluateAnswer() {
        const isCorrect = (state.operandA * state.operandB) === state.answer;

        document.body.classList.remove('white-on-blue', 'black-on-pink', 'black-on-yellow');
        document.body.classList.add(isCorrect ? 'white-on-blue' : 'black-on-pink');

        updateResults(isCorrect);
        updateOperation();
      }

      function updateResults(isCorrect) {
        if (isCorrect) {
          updateState({
            correctCount: state.correctCount + 1,
          });
        } else {
          updateState({
            wrongCount: state.wrongCount + 1,
          });
        }
      }

      function updateState(newState = {}) {
        Object.assign(state, newState);

        $dom.operandA.innerText = state.operandA;
        $dom.operandB.innerText = state.operandB;
        $dom.correctCount.innerText = state.correctCount;
        $dom.wrongCount.innerText = state.wrongCount;
        $dom.timer.innerText = formatTime(state.remainingSeconds);

        $dom.submit.disabled = state.remainingSeconds === 0;

        console.debug('state', state);
      }

      function clearAnswerAndSetFocus() {
        $dom.answer.value = '';
        $dom.answer.focus();
      }

      function getRandomInt(max) {
        return Math.ceil(Math.random() * max);
      }

      document.addEventListener('DOMContentLoaded', (event) => {
        setup();
      });
    </script>
  </head>

  <body class="black-on-yellow">
    <h1 class="title">
      Î»
    </h1>

    <header class="header">
      <div>
        ðŸ‘Œ Ã—
        <span id="correct-count">
          0
        </span>
      </div>

      <div
        id="timer"
        class="timer"
      >
        1:00
      </div>

      <div>
        ðŸ‘Ž Ã—
        <span id="wrong-count">
          0
        </span>
      </div>
    </header>

    <section class="operation">
      <form
        id="form"
        class="form"
      >
        <div class="operation__inner">
          <div>
            <span id="operand-a">
              99
            </span>
            Ã—
            <span id="operand-b">
              99
            </span>
            =
          </div>

          <input
            type="tel"
            id="answer"
            class="operation__answer"
            value="999"
          >
        </div>

        <button
          type="submit"
          id="submit"
          class="operation__submit"
        >
          calificar
        </button>
      </form>
    </section>
  </body>
</html>
